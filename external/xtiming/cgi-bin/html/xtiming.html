<html>
<head>
<title>The XFree86 Modeline Generator</title>
<script language=javascript>
<!--
function update_constrain(x, y) {
	document.mode.constrain_none.checked = (x == 0 || y == 0);
	document.mode.constrain_4_3.checked = (x == 4 && y == 3);
	document.mode.constrain_16_9.checked = (x == 16 && y == 9);
	document.mode.aspect_x.value = x;
	document.mode.aspect_y.value = y;
	update_hres();
}
function update_hres() {
	var xa = parseInt(document.mode.aspect_x.value);
	var ya = parseInt(document.mode.aspect_y.value);
	if (xa > 0 && ya > 0)
		document.mode.vr.value = Math.floor(document.mode.hr.value * ya / xa);
}
function update_vres() {
	var xa = parseInt(document.mode.aspect_x.value);
	var ya = parseInt(document.mode.aspect_y.value);
	if (xa > 0 && ya > 0)
		document.mode.hr.value = Math.floor(document.mode.vr.value * xa / ya);
}
function update_rr() {
	if (parseInt(document.mode.rr.value) == 0)
		document.mode.rr.value = Math.min(75, document.mode.max_rr.value);
}
function update_dcf() {
	if (parseInt(document.mode.dcf.value) == 0)
		document.mode.dcf.value = document.mode.max_dcf.value;
}
function init() {
	update_constrain(document.mode.aspect_x.value, document.mode.aspect_y.value);
}
//-->
</script>
</head onLoad="init()">
<body bgcolor="#ffffff">
<p align=center><img src="%%toplevel_path%%/images/xtiming.gif"></p>
<table border=0 cellpadding=0 cellspacing=0 width=600 align=center><tr>
<form name=mode method=post action="xtiming.pl">
<td align=center>
<input type=hidden name=have_monitor_specs value=1>
<fn_ifndef name=request_monitor_specs>
	<table border=1 cellpadding=3 cellspacing=0 width=600><tr><td><table border=0 cellpadding=2 cellspacing=0 width=100%>
	<tr bgcolor=#c0c0f0>
	<td><b>XFree86 Modeline</b><br>
	Put the following modeline in your XF86Config in the <b>Monitors</b> 
	section, and add it to your active modes in the <b>Screen</b> section.  
	Use this modeline at your own risk.</td>
	</tr><tr><td>
	<input type=hidden name=min_hsf value="%%min_hsf%%">
	<input type=hidden name=max_hsf value="%%max_hsf%%">
	<input type=hidden name=min_rr value="%%min_rr%%">
	<input type=hidden name=max_rr value="%%max_rr%%">
	<input type=hidden name=max_dcf value="%%max_dcf%%">
	<table bgcolor=black border=0 cellspacing=0 cellpadding=2><tr>
	<td><table bgcolor=white border=0 cellspacing=0 cellpadding=10><tr>
	<td><code>Modeline %%MODE%%</code><br></td>
	</tr></table></td>
	</tr></table>
	Horizontal sync frequency: %%HSF%% kHz<br>
	</td></tr>
	<fn_ifdef name=WARN>
		<tr><td><br></td></tr>
		<tr bgcolor="#f0c0c0"><td><b>Warning!</b></td></tr>
		<tr><td>
		<font color=red>
		<fn_list name=WARN scoping=.>
			<li>%%WARN.listval%%<br>
		</fn_list>
		</font>
		</td></tr>
	</fn_ifdef>
	</table></td></tr></table>
	<br>
</fn_ifndef>
<fn_ifdef name=request_monitor_specs>
	<table border=1 cellpadding=3 cellspacing=0 width=600><tr><td><table border=0 cellpadding=2 cellspacing=0 width=100%>
	<tr bgcolor=#c0c0f0>
	<td colspan=2><b>Monitor Configuration</b><br>
	Please enter your monitor specs.  If you don't know one of these, 
	leave it blank.  This information is used to generate warnings if the 
	requested mode is outside your monitor's capabilities. <i>These values 
	are not required.</i><br>
	</td>
	</tr><tr>
	<td valign=top><b>Horizontal Sync Rate</b><br>
	<font size="-1">The number of scan lines (visible and invisible) that are 
	drawn on the screen per second.</font></td>
	<td valign=top><input type=text name=min_hsf size=6>kHz min <input type=text name=max_hsf size=6>kHz max</td>
	</tr><tr>
	<td valign=top><b>Refresh Rate</b><br>
	<font size="-1">Also known as the Vertical Sync Rate, this is the number 
	of screen refreshes per second.</font></td>
	<td valign=top><input type=text name=min_rr size=6>Hz min <input type=text name=max_rr size=6 onChange="update_rr()">Hz max</td>
	</tr><tr>
	<td valign=top><b>Dot Clock Frequency</b><br>
	<font size="-1">Also known as the Pixel Clock, this is the speed at which 
	pixels are drawn on the screen.</font></td>
	<td valign=top><input type=text name=max_dcf size=6 onChange="update_dcf()">MHz maximum</td>
	</tr></table></td></tr></table>
	<br>
</fn_ifdef>
<table border=1 cellpadding=3 cellspacing=0 width=600><tr><td><table border=0 cellpadding=2 cellspacing=0 width=100%>
<tr bgcolor=#c0c0f0>
<td colspan=2><b>Basic Configuration</b><br>
For the best Refresh Rate, fill in all fields except Refresh Rate.  For 
maximum resolution, set both Horizontal and Vertical Resolution to zero.</td>
</tr><tr>
<td valign=top width=400><b>Visible Resolution</b><br>
<font size="-1">This setting determines how many pixels will be visible 
onscreen.  If both horizontal and vertical resolution are zero, the maximum 
possible resolution given the Refresh Rate, Dot Clock, and Aspect Ratio 
will be used.</font></td>
<td valign=top width=200><input type=text name=hr value="%%HR%%" size=4 onBlur="update_hres()">x<input type=text name=vr value="%%VR%%" size=4 onBlur="update_vres()">pixels</td>
</tr><tr>
<td valign=top><b>Refresh Rate</b><br>
<font size="-1">Also known as the Vertical Sync Rate, this is the number 
of screen refreshes per second.  Low values may cause a flickering effect, 
while higher values produce a more stable display.</font></td>
<td valign=top><input type=text name=rr value="%%RR%%" size=6>Hz (actually %%ACTUAL_RR%%)</td>
</tr><tr>
<td valign=top><b>Dot Clock Frequency</b><br>
<font size="-1">Also known as the Pixel Clock, this is the speed at which 
pixels are drawn on the screen.</font></td>
<td valign=top><input type=text name=dcf value="%%DCF%%" size=6>MHz</td>
</tr><tr height=3>
<td colspan=2><font size=1><hr></font></td>
</tr><tr>
<td valign=top><b>Constrain Aspect Ratio</b><br>
<font size="-1">Constrains the visible resolution to a given aspect ratio.  
The typical CRT ratio is 4/3.<noscript><font color=red>  This feature works 
best with JavaScript.</font></noscript></font></td>
<td valign=top>
<input type=text name=aspect_x value="%%aspect_x%%" size=2 onChange="update_constrain(this.value, this.form.aspect_y.value)">/<input type=text name=aspect_y value="%%aspect_y%%" size=2 onChange="update_constrain(this.form.aspect_x.value, this.value)">
<script language=javascript>
<!--
document.write(''+
'<input type=checkbox value=1 name=constrain_none onClick="update_constrain(0, 0)"> None '+
'<input type=checkbox name=constrain_4_3 value=1 onClick="update_constrain(4,3)"> 4/3 '+
'<input type=checkbox value=1 name=constrain_16_9 onClick="update_constrain(16,9)"> 16/9'+
'');
//-->
</script></td>
</tr><tr>
<td valign=top><b>Interlace</b><br>
<font size="-1">Interlace draws only half of the screen each refresh, 
doubling the effective refresh rate.  Interlaced modes are well known for 
their high flicker, but a 60Hz interlaced mode looks much better than a 
30Hz non-interlaced mode.</font></td>
<td valign=top><input type=checkbox name=interlace value=1 onClick="document.mode.doublescan.checked=false" %%interlace%%> interlace</td>
</tr><tr>
<td valign=top><b>Doublescan</b><br>
<font size="-1">Doublescan draws every line on the screen twice, doubling 
the effective dot clock and allowing lower resolutions.  This is often 
necessary for modes like 320x200.</font></td>
<td valign=top><input type=checkbox name=doublescan value=1 onClick="document.mode.interlace.checked=false" %%doublescan%%> doublescan</td>
</tr></table></td></tr></table>
<br>
<table border=1 cellpadding=3 cellspacing=0 width=600><tr><td><table border=0 cellpadding=2 cellspacing=0 width=100%>
<tr bgcolor=#c0c0f0>
<td colspan=2><b>Advanced Configuration</b><br>
Do not change the following sync times unless you know what you're doing.  
These almost never need changing.</td>
</tr><tr>
<td valign=top width=400><b>Horizontal Sync Time</b><br>
<font size="-1">This should vary from 3.5 to 4.0, with 3.8 being a fairly safe bet.</font></td>
<td valign=top width=200><input type=text name=hst value="%%HST%%" size=6> microseconds</td>
</tr><tr>
<td valign=top><b>Vertical Sync Time</b><br>
<font size="-1">This should vary from 50 to 300, with 150 being a fairly safe bet.</font></td>
<td valign=top><input type=text name=vst value="%%VST%%" size=6> microseconds</td>
</tr></table></td></tr></table>
<br>
<input type=submit value="Calculate Modeline"> <input type=reset value="Reset">
<hr>
<div align=right><font size="-1">
<a href="http://crystaltokyo.com/~allanon/%%package_name%%-%%package_major%%.%%package_minor%%.%%package_patch%%.tar.gz">%%package_name%%-%%package_major%%.%%package_minor%%.%%package_patch%%</a><br>
Designed and written by <a href="mailto:allanon@crystaltokyo.com">Ethan Fischer</a>.<br>
This script would not have been possible without the <a href="http://www.linuxdoc.org/HOWTO/XFree86-Video-Timings-HOWTO.html">XFree86 Video Timings HOWTO</a>.<br>
</font></div>
</td></form></tr></table>
</body>
</html>
