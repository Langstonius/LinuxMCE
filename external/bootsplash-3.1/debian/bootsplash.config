#!/bin/bash

set -e

# source debconf stuff
. /usr/share/debconf/confmodule

THEME_SYMLINK="/etc/bootsplash/themes/current"

# get and save the current theme, ignore errors
db_get shared/bootsplash-theme || true
OLD_DEFAULT="$RET"

# get the owners and the choices for this option
db_metaget shared/bootsplash-theme owners
OWNERS="$RET"

db_subst shared/bootsplash-theme choices $OWNERS

# input the desired theme
db_input medium shared/bootsplash-theme || true
db_go

# get the new default theme
db_get shared/bootsplash-theme
NEW_DEFAULT="$RET"

if [ "$NEW_DEFAULT" != "$OLD_DEFAULT" ]
then
   rm -f $THEME_SYMLINK || true
elif [ "$NEW_RES" != "$OLD_RES" ]
then
   rm -f $THEME_SYMLINK || true
fi

exit 0
