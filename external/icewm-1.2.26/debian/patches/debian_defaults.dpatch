#!/bin/sh -e
## debian_defaults.dpatch by Eduard Bloch <blade@debian.org>
##
## All lines beginning with `## DP:' are a description of the patch.
## DP: No description.

if [ $# -ne 1 ]; then
    echo >&2 "`basename $0`: script expects -patch|-unpatch as argument"
    exit 1
fi

[ -f debian/patches/00patch-opts ] && . debian/patches/00patch-opts
patch_opts="${patch_opts:--f --no-backup-if-mismatch}"

case "$1" in
       -patch) patch $patch_opts -p1 < $0;;
       -unpatch) patch $patch_opts -p1 -R < $0;;
        *)
                echo >&2 "`basename $0`: script expects -patch|-unpatch as argument"
                exit 1;;
esac

exit 0

@DPATCH@
diff -urNad ./lib/keys.in /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/lib/keys.in
--- ./lib/keys.in	2005-03-20 14:31:40.000000000 +0100
+++ /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/lib/keys.in	2005-03-26 15:10:17.240168976 +0100
@@ -9,13 +9,16 @@
 # You'll have to omit XK_ prefixs and to replace XF86XK_ prefixes by
 # XF86. Valid modifiers are Alt, Ctrl, Shift, Meta, Super and Hyper.
 #
-key "Alt+Ctrl+t"		xterm
+key "Alt+Ctrl+t"		x-terminal-emulator
 key "Alt+Ctrl+f"		fte
 key "Alt+Ctrl+e"		nedit
 key "Alt+Ctrl+g"		gimp
-key "Alt+Ctrl+n"		netscape -noraise -remote openBrowser
-key "Alt+Ctrl+b"		netscape -noraise -remote openBookmarks
-key "Alt+Ctrl+m"		netscape -noraise -remote openURL(mailto:,new-window) 
+#key "Alt+Ctrl+n"		netscape -noraise -remote openBrowser
+#key "Alt+Ctrl+b"		netscape -noraise -remote openBookmarks
+#key "Alt+Ctrl+m"		netscape -noraise -remote openURL(mailto:,new-window) 
+key "Alt+Ctrl+n"		sensible-browser
+#key "Alt+Ctrl+b"		mozilla -noraise -remote openBookmarks
+key "Alt+Ctrl+m"		mozilla-thunderbird mailto:
 
 key "Alt+Ctrl+KP_Divide"	aumix -v -5		# lower volume
 key "Alt+Ctrl+KP_Multiply"	aumix -v +5		# raise volume
@@ -30,7 +33,10 @@
 key "XF86AudioMute"		aumix -v 0
 key "XF86AudioPlay"		cdplay play 1
 key "XF86AudioStop"		cdplay stop
-key "XF86HomePage"		netscape -noraise -remote openHomepage
-key "XF86Mail"			netscape -noraise -remote openURL(mailto:,new-window) 
-key "XF86Search"		netscape -noraise -remote openURL(http://www.google.com/)
+#key "XF86HomePage"		netscape -noraise -remote openHomepage
+#key "XF86Mail"			netscape -noraise -remote openURL(mailto:,new-window) 
+#key "XF86Search"		netscape -noraise -remote openURL(http://www.google.com/)
+key "XF86HomePage"		sensible-browser
+key "XF86Mail"			mozilla-thunderbird mailto:
+key "XF86Search"		sensible-browser http://www.google.com/
 key "XF86Eject"			eject
diff -urNad ./lib/menu.in /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/lib/menu.in
--- ./lib/menu.in	2005-03-20 14:31:40.000000000 +0100
+++ /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/lib/menu.in	2005-03-26 15:10:17.240168976 +0100
@@ -5,10 +5,10 @@
 # (re)install icewm.
 #
 prog xterm xterm xterm
-prog rxvt xterm rxvt -bg black -cr green -fg white -C -fn 9x15 -sl 500
+prog rxvt xterm rxvt -rv -C -fn 9x15 -sl 500
 prog fte fte fte
 prog NEdit nedit nedit
-prog Mozilla mozilla mozilla
+prog "Mozilla Firefox" /usr/share/pixmaps/mozilla-firefox.xpm firefox
 prog XChat xchat xchat
 prog Gimp gimp gimp
 separator
diff -urNad ./lib/toolbar.in /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/lib/toolbar.in
--- ./lib/toolbar.in	2005-03-20 14:31:40.000000000 +0100
+++ /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/lib/toolbar.in	2005-03-26 15:10:17.241168824 +0100
@@ -4,6 +4,8 @@
 # since modifications to this file will be discarded when you
 # (re)install icewm.
 #
-prog XTerm xterm xterm
-prog FTE fte fte
-prog Netscape netscape netscape
+prog XTerm xterm x-terminal-emulator
+#prog FTE fte fte
+#prog Netscape netscape netscape
+prog    "gvim" /usr/X11R6/include/X11/pixmaps/vim.xpm /usr/bin/gvim -f
+prog    "Mozilla Firefox" /usr/share/pixmaps/mozilla-firefox.xpm firefox
diff -urNad ./lib/winoptions.in /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/lib/winoptions.in
--- ./lib/winoptions.in	2005-03-20 14:31:40.000000000 +0100
+++ /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/lib/winoptions.in	2005-03-26 15:10:17.241168824 +0100
@@ -6,6 +6,8 @@
 
 xterm.icon: xterm
 rxvt.icon: xterm
+urxvtc.icon: urxvt
+urxvt.icon: urxvt
 nxterm.icon: xterm
 Gimp.icon: gimp
 fte.icon: fte
diff -urNad ./src/default.h /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/src/default.h
--- ./src/default.h	2005-03-20 14:31:41.000000000 +0100
+++ /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/src/default.h	2005-03-26 15:10:17.242168672 +0100
@@ -88,7 +88,7 @@
 XIV(bool, win95keys,                            true)
 XIV(bool, autoReloadMenus,                      true)
 XIV(bool, clientMouseActions,                   true)
-XIV(bool, showPrograms,                         false)
+XIV(bool, showPrograms,                         true)
 XIV(bool, showThemesMenu,                       true)
 XIV(bool, showLogoutMenu,                       true)
 XIV(bool, showLogoutSubMenu,                    true)
@@ -131,15 +131,15 @@
 #endif
 
 XSV(const char *, mailBoxPath,                  0)
-XSV(const char *, mailCommand,                  "xterm -name pine -title PINE -e pine")
-XSV(const char *, mailClassHint,                "pine.XTerm")
+XSV(const char *, mailCommand,                  "x-terminal-emulator -name mutt -title Mutt -e mutt")
+XSV(const char *, mailClassHint,                "mutt.XTerm")
 XSV(const char *, newMailCommand,               0)
-XSV(const char *, lockCommand,                  0)
+XSV(const char *, lockCommand,                  "xlock -remote -mode blank")
 XSV(const char *, clockCommand,                 "xclock -name icewm -title Clock")
 XSV(const char *, clockClassHint,               "icewm.XClock")
 XSV(const char *, runDlgCommand,                0)
 XSV(const char *, openCommand,                  0)
-XSV(const char *, terminalCommand,              "xterm")
+XSV(const char *, terminalCommand,              "x-terminal-emulator")
 XSV(const char *, logoutCommand,                0)
 XSV(const char *, logoutCancelCommand,          0)
 XSV(const char *, shutdownCommand,              0)
@@ -147,9 +147,9 @@
 XIV(int, taskBarCPUDelay,                       500)
 XIV(int, taskBarNetSamples,                     20)
 XIV(int, taskBarNetDelay,                       500)
-XSV(const char *, cpuCommand,                   "xterm -name top -title Process\\ Status -e top")
+XSV(const char *, cpuCommand,                   "x-terminal-emulator -name top -title Process\\ Status -e top")
 XSV(const char *, cpuClassHint,                 "top.XTerm")
-XSV(const char *, netCommand,                   "xterm -name netstat -title 'Network Status' -e netstat -c")
+XSV(const char *, netCommand,                   "x-terminal-emulator -name netstat -title 'Network Status' -e netstat -c")
 XSV(const char *, netClassHint,                 "netstat.XTerm")
 XSV(const char *, netDevice,                    "ppp0 eth0")
 XSV(const char *, addressBarCommand,            0)
diff -urNad ./src/Makefile.in /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/src/Makefile.in
--- ./src/Makefile.in	2005-03-20 14:31:41.000000000 +0100
+++ /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/src/Makefile.in	2005-03-26 15:10:17.243168520 +0100
@@ -31,7 +31,7 @@
                 -DICEWMBGEXE='"icewmbg$(EXEEXT)"' \
                 -DICESMEXE='"icewm-session$(EXEEXT)"' \
                 -DICEHELPEXE='"icehelp$(EXEEXT)"' \
-                -DICEHELPIDX='"$(DOCDIR)/icewm-$(VERSION)/icewm.html"'
+                -DICEHELPIDX='"/usr/share/doc/icewm-common/html/icewm.html"'
 
 CXXFLAGS =      @CXXFLAGS@ $(DEBUG) $(DEFS) \
 	        @CORE_CFLAGS@ @IMAGE_CFLAGS@ @AUDIO_CFLAGS@ # `fc-config --cflags`
diff -urNad ./src/wmapp.cc /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/src/wmapp.cc
--- ./src/wmapp.cc	2005-03-20 14:31:42.000000000 +0100
+++ /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/src/wmapp.cc	2005-03-26 15:10:17.245168216 +0100
@@ -692,7 +692,7 @@
                 logoutMenu->add(new DObjectMenuItem(restartIcewm));
 
             DProgram *restartXTerm =
-                DProgram::newProgram(_("Restart _Xterm"), 0, true, 0, "xterm", noargs);
+                DProgram::newProgram(_("Restart _Xterm"), 0, true, 0, "x-terminal-emulator", noargs);
             if (restartXTerm)
                 logoutMenu->add(new DObjectMenuItem(restartXTerm));
 #endif
diff -urNad ./src/yprefs.h /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/src/yprefs.h
--- ./src/yprefs.h	2005-03-20 14:31:42.000000000 +0100
+++ /tmp/dpep-work.HriEP2/icewm-1.2.20+21pre1/src/yprefs.h	2005-03-26 15:10:17.245168216 +0100
@@ -34,7 +34,7 @@
 #ifdef CONFIG_XFREETYPE
 XIV(bool, haveXft,                              true)
 #endif
-XSV(const char *, iconPath,                     0)
+XSV(const char *, iconPath,                     "/usr/share/icons:/usr/share/pixmaps")
 XSV(const char *, libDir,                       LIBDIR)
 XSV(const char *, configDir,                    CFGDIR)
 #define CONFIG_DEFAULT_THEME "icedesert/default.theme"
