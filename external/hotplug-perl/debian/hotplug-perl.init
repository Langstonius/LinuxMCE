#!/bin/sh -e
#
# Filename..........: $RCSfile: hotplug-perl.init,v $
# Original Author...: Anthony L. Awtrey
# Version...........: $Revision: 1.1 $
# Last Modified By..: $Author: aawtrey $
# Last Modified On..: $Date: 2005/06/06 14:38:35 $
#
# Copyright 2005 I.D.E.A.L. Technology Corporation
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
#
# Purpose:  Starts and stops hotplug-perl.
#

PATH=/sbin:/bin:/usr/sbin:/usr/bin

[ -x /etc/hotplug-perl/start-hotplug ] || exit 0

if [ ! -f /proc/sys/kernel/hotplug ]; then
   echo "Kernel hotplug support not enabled."
   exit 0
fi

[ -e /etc/default/hotplug-perl ] && . /etc/default/hotplug-perl

case "$1" in
start)
    echo "Starting hotplug-perl subsystem"
    /etc/hotplug-perl/start-hotplug
    echo "/sbin/hotplug-perl" > /proc/sys/kernel/hotplug
    ;;

stop)
    echo "Stopping hotplug-perl subsystem"
    echo "/bin/true" > /proc/sys/kernel/hotplug
    ;;

restart|force-reload)
    echo "Stopping hotplug-perl subsystem"
    echo "Starting hotplug-perl subsystem"
    ;;

status)
    echo "Hotplug-perl status"
    ;;

*)
    echo "Usage: $0 {start|stop|restart|status|force-reload}" >&2
    exit 1
    ;;
esac

exit 0
