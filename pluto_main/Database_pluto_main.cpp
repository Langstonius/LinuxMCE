#ifdef WIN32
	#include <winsock.h>
#endif
#include <iostream>
#include <mysql.h>
#include <stdio.h>
#include <string>

#include <map>
#include <vector>

using namespace std;

#include "Database_pluto_main.h"


#include "DCEConfig.h"

Database_pluto_main::Database_pluto_main()
{
CreateTable_Array();
CreateTable_Broadcast();
CreateTable_Button();
CreateTable_CachedScreens();
CreateTable_CannedEvents();
CreateTable_CannedEvents_CriteriaParmList();
CreateTable_Command();
CreateTable_CommandCategory();
CreateTable_CommandGroup();
CreateTable_CommandGroup_Command();
CreateTable_CommandGroup_Command_CommandParameter();
CreateTable_CommandGroup_D();
CreateTable_CommandGroup_D_Command();
CreateTable_CommandGroup_D_Command_CommandParameter();
CreateTable_CommandGroup_EntertainArea();
CreateTable_CommandGroup_Room();
CreateTable_CommandParameter();
CreateTable_Command_CommandParameter();
CreateTable_Command_Pipe();
CreateTable_ConfigType();
CreateTable_ConfigType_File();
CreateTable_ConfigType_Setting();
CreateTable_ConfigType_Token();
CreateTable_ConnectorType();
CreateTable_Country();
CreateTable_Criteria();
CreateTable_CriteriaList();
CreateTable_CriteriaList_CriteriaParmList();
CreateTable_CriteriaParm();
CreateTable_CriteriaParmList();
CreateTable_CriteriaParmNesting();
CreateTable_CriteriaParmNesting_D();
CreateTable_CriteriaParm_D();
CreateTable_Criteria_D();
CreateTable_DSPMode();
CreateTable_DataGrid();
CreateTable_DesignObj();
CreateTable_DesignObjCategory();
CreateTable_DesignObjParameter();
CreateTable_DesignObjType();
CreateTable_DesignObjType_DesignObjParameter();
CreateTable_DesignObjVariation();
CreateTable_DesignObjVariation_DesignObj();
CreateTable_DesignObjVariation_DesignObjParameter();
CreateTable_DesignObjVariation_Text();
CreateTable_DesignObjVariation_Text_Skin_Language();
CreateTable_DesignObjVariation_Zone();
CreateTable_Device();
CreateTable_DeviceCategory();
CreateTable_DeviceCategory_DeviceData();
CreateTable_DeviceCategory_Event();
CreateTable_DeviceCommandGroup();
CreateTable_DeviceCommandGroup_Command();
CreateTable_DeviceCommandGroup_DeviceCommandGroup_Parent();
CreateTable_DeviceData();
CreateTable_DeviceGroup();
CreateTable_DeviceTemplate();
CreateTable_DeviceTemplate_AV();
CreateTable_DeviceTemplate_DSPMode();
CreateTable_DeviceTemplate_DesignObj();
CreateTable_DeviceTemplate_DeviceCategory_ControlledVia();
CreateTable_DeviceTemplate_DeviceCategory_ControlledVia_Pipe();
CreateTable_DeviceTemplate_DeviceCommandGroup();
CreateTable_DeviceTemplate_DeviceData();
CreateTable_DeviceTemplate_DeviceTemplate_ControlledVia();
CreateTable_DeviceTemplate_DeviceTemplate_ControlledVia_Pipe();
CreateTable_DeviceTemplate_DeviceTemplate_Related();
CreateTable_DeviceTemplate_Event();
CreateTable_DeviceTemplate_InfraredGroup();
CreateTable_DeviceTemplate_Input();
CreateTable_DeviceTemplate_MediaType();
CreateTable_DeviceTemplate_MediaType_DesignObj();
CreateTable_DeviceTemplate_Output();
CreateTable_DeviceTemplate_PageSetup();
CreateTable_Device_Command();
CreateTable_Device_CommandGroup();
CreateTable_Device_DeviceData();
CreateTable_Device_DeviceGroup();
CreateTable_Device_Device_Pipe();
CreateTable_Device_Device_Related();
CreateTable_Device_EntertainArea();
CreateTable_Device_HouseMode();
CreateTable_Device_Orbiter();
CreateTable_Device_StartupScript();
CreateTable_Device_Users();
CreateTable_Direction();
CreateTable_Directory();
CreateTable_Distro();
CreateTable_Document();
CreateTable_Document_Comment();
CreateTable_EntertainArea();
CreateTable_Event();
CreateTable_EventCategory();
CreateTable_EventHandler();
CreateTable_EventParameter();
CreateTable_Event_EventParameter();
CreateTable_Floorplan();
CreateTable_FloorplanObjectType();
CreateTable_FloorplanObjectType_Color();
CreateTable_FloorplanType();
CreateTable_HorizAlignment();
CreateTable_HouseMode();
CreateTable_Household();
CreateTable_Household_Installation();
CreateTable_Icon();
CreateTable_Image();
CreateTable_InfraredCode();
CreateTable_InfraredGroup();
CreateTable_InfraredGroup_DSPMode();
CreateTable_InfraredGroup_Input();
CreateTable_Input();
CreateTable_InstallWizard();
CreateTable_InstallWizard_Distro();
CreateTable_Installation();
CreateTable_Installation_RepositorySource_URL();
CreateTable_Installation_Users();
CreateTable_Language();
CreateTable_License();
CreateTable_Manufacturer();
CreateTable_MediaType();
CreateTable_MediaType_Broadcast();
CreateTable_News();
CreateTable_OperatingSystem();
CreateTable_Orbiter();
CreateTable_Orbiter_Users_PasswordReq();
CreateTable_Orbiter_Variable();
CreateTable_Output();
CreateTable_Package();
CreateTable_PackageType();
CreateTable_Package_Compat();
CreateTable_Package_Directory();
CreateTable_Package_Directory_File();
CreateTable_Package_Package();
CreateTable_Package_Source();
CreateTable_Package_Source_Compat();
CreateTable_Package_Users();
CreateTable_Package_Version();
CreateTable_PageSetup();
CreateTable_ParameterType();
CreateTable_PhoneLineType();
CreateTable_Pipe();
CreateTable_RepositorySource();
CreateTable_RepositorySource_URL();
CreateTable_RepositoryType();
CreateTable_Room();
CreateTable_RoomType();
CreateTable_Schema();
CreateTable_SetupStep();
CreateTable_Size();
CreateTable_Skin();
CreateTable_StabilityStatus();
CreateTable_StartupScript();
CreateTable_Style();
CreateTable_StyleVariation();
CreateTable_System();
CreateTable_Template();
CreateTable_Text();
CreateTable_TextCategory();
CreateTable_Text_LS();
CreateTable_Text_LS_AltVersions();
CreateTable_UnknownDevices();
CreateTable_UserMode();
CreateTable_Users();
CreateTable_Variable();
CreateTable_Version();
CreateTable_VertAlignment();
CreateTable_psc_constants_batdet();
CreateTable_psc_constants_bathdr();
CreateTable_psc_constants_repset();
CreateTable_psc_constants_schema();
CreateTable_psc_constants_tables();
CreateTable_psc_dce_batdet();
CreateTable_psc_dce_bathdr();
CreateTable_psc_dce_repset();
CreateTable_psc_dce_schema();
CreateTable_psc_dce_tables();
CreateTable_psc_designer_batdet();
CreateTable_psc_designer_bathdr();
CreateTable_psc_designer_repset();
CreateTable_psc_designer_schema();
CreateTable_psc_designer_tables();
CreateTable_psc_document_batdet();
CreateTable_psc_document_bathdr();
CreateTable_psc_document_repset();
CreateTable_psc_document_schema();
CreateTable_psc_document_tables();
CreateTable_psc_ir_batdet();
CreateTable_psc_ir_bathdr();
CreateTable_psc_ir_repset();
CreateTable_psc_ir_schema();
CreateTable_psc_ir_tables();
CreateTable_psc_local_batdet();
CreateTable_psc_local_bathdr();
CreateTable_psc_local_repset();
CreateTable_psc_local_schema();
CreateTable_psc_local_tables();
CreateTable_psc_website_batdet();
CreateTable_psc_website_bathdr();
CreateTable_psc_website_repset();
CreateTable_psc_website_schema();
CreateTable_psc_website_tables();
}

Database_pluto_main::~Database_pluto_main()
{
	DeleteAllTables();
}

void Database_pluto_main::DeleteAllTables()
{
DeleteTable_Array();
DeleteTable_Broadcast();
DeleteTable_Button();
DeleteTable_CachedScreens();
DeleteTable_CannedEvents();
DeleteTable_CannedEvents_CriteriaParmList();
DeleteTable_Command();
DeleteTable_CommandCategory();
DeleteTable_CommandGroup();
DeleteTable_CommandGroup_Command();
DeleteTable_CommandGroup_Command_CommandParameter();
DeleteTable_CommandGroup_D();
DeleteTable_CommandGroup_D_Command();
DeleteTable_CommandGroup_D_Command_CommandParameter();
DeleteTable_CommandGroup_EntertainArea();
DeleteTable_CommandGroup_Room();
DeleteTable_CommandParameter();
DeleteTable_Command_CommandParameter();
DeleteTable_Command_Pipe();
DeleteTable_ConfigType();
DeleteTable_ConfigType_File();
DeleteTable_ConfigType_Setting();
DeleteTable_ConfigType_Token();
DeleteTable_ConnectorType();
DeleteTable_Country();
DeleteTable_Criteria();
DeleteTable_CriteriaList();
DeleteTable_CriteriaList_CriteriaParmList();
DeleteTable_CriteriaParm();
DeleteTable_CriteriaParmList();
DeleteTable_CriteriaParmNesting();
DeleteTable_CriteriaParmNesting_D();
DeleteTable_CriteriaParm_D();
DeleteTable_Criteria_D();
DeleteTable_DSPMode();
DeleteTable_DataGrid();
DeleteTable_DesignObj();
DeleteTable_DesignObjCategory();
DeleteTable_DesignObjParameter();
DeleteTable_DesignObjType();
DeleteTable_DesignObjType_DesignObjParameter();
DeleteTable_DesignObjVariation();
DeleteTable_DesignObjVariation_DesignObj();
DeleteTable_DesignObjVariation_DesignObjParameter();
DeleteTable_DesignObjVariation_Text();
DeleteTable_DesignObjVariation_Text_Skin_Language();
DeleteTable_DesignObjVariation_Zone();
DeleteTable_Device();
DeleteTable_DeviceCategory();
DeleteTable_DeviceCategory_DeviceData();
DeleteTable_DeviceCategory_Event();
DeleteTable_DeviceCommandGroup();
DeleteTable_DeviceCommandGroup_Command();
DeleteTable_DeviceCommandGroup_DeviceCommandGroup_Parent();
DeleteTable_DeviceData();
DeleteTable_DeviceGroup();
DeleteTable_DeviceTemplate();
DeleteTable_DeviceTemplate_AV();
DeleteTable_DeviceTemplate_DSPMode();
DeleteTable_DeviceTemplate_DesignObj();
DeleteTable_DeviceTemplate_DeviceCategory_ControlledVia();
DeleteTable_DeviceTemplate_DeviceCategory_ControlledVia_Pipe();
DeleteTable_DeviceTemplate_DeviceCommandGroup();
DeleteTable_DeviceTemplate_DeviceData();
DeleteTable_DeviceTemplate_DeviceTemplate_ControlledVia();
DeleteTable_DeviceTemplate_DeviceTemplate_ControlledVia_Pipe();
DeleteTable_DeviceTemplate_DeviceTemplate_Related();
DeleteTable_DeviceTemplate_Event();
DeleteTable_DeviceTemplate_InfraredGroup();
DeleteTable_DeviceTemplate_Input();
DeleteTable_DeviceTemplate_MediaType();
DeleteTable_DeviceTemplate_MediaType_DesignObj();
DeleteTable_DeviceTemplate_Output();
DeleteTable_DeviceTemplate_PageSetup();
DeleteTable_Device_Command();
DeleteTable_Device_CommandGroup();
DeleteTable_Device_DeviceData();
DeleteTable_Device_DeviceGroup();
DeleteTable_Device_Device_Pipe();
DeleteTable_Device_Device_Related();
DeleteTable_Device_EntertainArea();
DeleteTable_Device_HouseMode();
DeleteTable_Device_Orbiter();
DeleteTable_Device_StartupScript();
DeleteTable_Device_Users();
DeleteTable_Direction();
DeleteTable_Directory();
DeleteTable_Distro();
DeleteTable_Document();
DeleteTable_Document_Comment();
DeleteTable_EntertainArea();
DeleteTable_Event();
DeleteTable_EventCategory();
DeleteTable_EventHandler();
DeleteTable_EventParameter();
DeleteTable_Event_EventParameter();
DeleteTable_Floorplan();
DeleteTable_FloorplanObjectType();
DeleteTable_FloorplanObjectType_Color();
DeleteTable_FloorplanType();
DeleteTable_HorizAlignment();
DeleteTable_HouseMode();
DeleteTable_Household();
DeleteTable_Household_Installation();
DeleteTable_Icon();
DeleteTable_Image();
DeleteTable_InfraredCode();
DeleteTable_InfraredGroup();
DeleteTable_InfraredGroup_DSPMode();
DeleteTable_InfraredGroup_Input();
DeleteTable_Input();
DeleteTable_InstallWizard();
DeleteTable_InstallWizard_Distro();
DeleteTable_Installation();
DeleteTable_Installation_RepositorySource_URL();
DeleteTable_Installation_Users();
DeleteTable_Language();
DeleteTable_License();
DeleteTable_Manufacturer();
DeleteTable_MediaType();
DeleteTable_MediaType_Broadcast();
DeleteTable_News();
DeleteTable_OperatingSystem();
DeleteTable_Orbiter();
DeleteTable_Orbiter_Users_PasswordReq();
DeleteTable_Orbiter_Variable();
DeleteTable_Output();
DeleteTable_Package();
DeleteTable_PackageType();
DeleteTable_Package_Compat();
DeleteTable_Package_Directory();
DeleteTable_Package_Directory_File();
DeleteTable_Package_Package();
DeleteTable_Package_Source();
DeleteTable_Package_Source_Compat();
DeleteTable_Package_Users();
DeleteTable_Package_Version();
DeleteTable_PageSetup();
DeleteTable_ParameterType();
DeleteTable_PhoneLineType();
DeleteTable_Pipe();
DeleteTable_RepositorySource();
DeleteTable_RepositorySource_URL();
DeleteTable_RepositoryType();
DeleteTable_Room();
DeleteTable_RoomType();
DeleteTable_Schema();
DeleteTable_SetupStep();
DeleteTable_Size();
DeleteTable_Skin();
DeleteTable_StabilityStatus();
DeleteTable_StartupScript();
DeleteTable_Style();
DeleteTable_StyleVariation();
DeleteTable_System();
DeleteTable_Template();
DeleteTable_Text();
DeleteTable_TextCategory();
DeleteTable_Text_LS();
DeleteTable_Text_LS_AltVersions();
DeleteTable_UnknownDevices();
DeleteTable_UserMode();
DeleteTable_Users();
DeleteTable_Variable();
DeleteTable_Version();
DeleteTable_VertAlignment();
DeleteTable_psc_constants_batdet();
DeleteTable_psc_constants_bathdr();
DeleteTable_psc_constants_repset();
DeleteTable_psc_constants_schema();
DeleteTable_psc_constants_tables();
DeleteTable_psc_dce_batdet();
DeleteTable_psc_dce_bathdr();
DeleteTable_psc_dce_repset();
DeleteTable_psc_dce_schema();
DeleteTable_psc_dce_tables();
DeleteTable_psc_designer_batdet();
DeleteTable_psc_designer_bathdr();
DeleteTable_psc_designer_repset();
DeleteTable_psc_designer_schema();
DeleteTable_psc_designer_tables();
DeleteTable_psc_document_batdet();
DeleteTable_psc_document_bathdr();
DeleteTable_psc_document_repset();
DeleteTable_psc_document_schema();
DeleteTable_psc_document_tables();
DeleteTable_psc_ir_batdet();
DeleteTable_psc_ir_bathdr();
DeleteTable_psc_ir_repset();
DeleteTable_psc_ir_schema();
DeleteTable_psc_ir_tables();
DeleteTable_psc_local_batdet();
DeleteTable_psc_local_bathdr();
DeleteTable_psc_local_repset();
DeleteTable_psc_local_schema();
DeleteTable_psc_local_tables();
DeleteTable_psc_website_batdet();
DeleteTable_psc_website_bathdr();
DeleteTable_psc_website_repset();
DeleteTable_psc_website_schema();
DeleteTable_psc_website_tables();
}

bool Database_pluto_main::Connect(string host, string user, string pass, string sDBName, int port)
{
db_handle = mysql_init(NULL);
if (mysql_real_connect(db_handle, host.c_str(), user.c_str(), pass.c_str(), sDBName.c_str(), port, NULL, 0) == NULL)
{return false;}
else
{return true;}
}

bool Database_pluto_main::Connect(class DCEConfig *pDCEConfig)
{
	return Connect(pDCEConfig->m_sDBHost,pDCEConfig->m_sDBUser,pDCEConfig->m_sDBPassword,pDCEConfig->m_sDBName,pDCEConfig->m_iDBPort);
}
